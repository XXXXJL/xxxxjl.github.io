---
layout: post
title: Service 相关知识学习笔记
date: 2018-01-06 16:08:00.000000000 +08:00
---



# Service 基础

**Service 的分类：**

按运行地点分类：**本地服务**和**远程服务**；

按运行类型分类：**前台服务**和**后台服务**;

按功能分类：**可通信服务**和**不可通信服务**

**特点：**

按运行地点分类：

|           类别            |                             特点                             |                             优点                             |                           缺点                           |                     应用场景                     |
| :-----------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: | :------------------------------------------------------: | :----------------------------------------------: |
| 本地服务（LocalService）  |    1，运行在主线程<br>2, 主线程被终止后，服务也会被终止。    | 1， 节约资源<br>2, 通信方便：由于在同一进程中因此不需要IPC[^IPC]和AIDL。 |         限制性大：主进程被终止后，服务也会终止。         | （最常用）需要依附某个进程的服务，例如音乐播放。 |
| 远程服务（RemoteService） | 1， 运行在独立的进程<br>2, 服务常驻在后台，不受其他Activity的影响。 |        灵活，服务常驻后台，不受其他Activity 的影响。         | 1，消耗资源：单独进程<br>2，使用AIDL 进行IPC[^IPC]复杂。 |                   系统级别服务                   |

[^IPC]: IPC（Inter-Process Communication，[进程间通信](https://baike.baidu.com/item/进程间通信/1235923)）。

按运行类型分类：

|   类别   |               特点               |                           应用场景                           |
| :------: | :------------------------------: | :----------------------------------------------------------: |
| 前台服务 | 在通知栏显示通知（用户可以看到） | 服务使用时需要让用户知道并进行相关操作，音乐播放并在状通知栏显示播放的音乐信息，并能进行一些操作。 |
| 后台服务 |  处于后台的服务（用户无法看到）  | 服务使用时不需要让用户知道并进行相关操作，如天气刷新，日期同步等。 |

按功能分类：

|      类别      |                             特点                             |          应用场景          |
| :------------: | :----------------------------------------------------------: | :------------------------: |
| 不可通信的服务 | 1，用`startService()`启动<br>2，调用者退出后service 仍谈存在。 | 该后台服务不进行任何通信。 |
|  可通信的服务  | 1，用`bindService()`启动<br>2，调用者退出后，随着调用者一起被销毁。 |    该后台需要进行通信。    |



# 本地Service

**具体使用步骤：**

* 步骤1：新建子类继承Service 类

  > 需要重写父类的`onCreate()`、`onStartCommand()`、`onDestory()`和`onBind()`方法

* 步骤2：构建用于启动Service 的Intent 对象
* 步骤3：调用`startService()` 启动Service、调用`stopService()` 停止服务
* 步骤4：在`AndroidManifest.xml` 中注册Service



